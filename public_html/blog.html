<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div>
            <input id="lang" type="text" placeholder="Enter language name"/>
        </div>
        <div>
            <textarea id="prog" cols="166" rows="20"></textarea>
            <br>
            <input type="button" onclick="x();" value="Send"/>
        </div>
        <div id="resp">
            Response goes here...
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/3.0.0/fetch.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
        <script>
            function x() {
                const url = "https://api.jdoodle.com/v1/execute/";
                const proxy = "https://cors-anywhere.herokuapp.com/";
                var lang = $('#lang').val();
                var src = $('#prog').val();
                var dataJ = {
                    "clientId": "86e3b4da0ce141c7c043d1dbb1e3b059",
                    "clientSecret": "74a51f4f738cd2d737d5d992b8d29233677617a6b732e10d4f8d781fbd72893",
                    "language": lang,
                    "script": src,
                    "versionIndex": "0"
                };
                $.ajax({
                    type: "POST",
                    url: proxy + url,
                    data: JSON.stringify(dataJ),
                    headers:{"Content-Type":"application/json"},
                    success: function(e) {
                        $('#resp').html(e.output+"<br><br><hr>Time:"+e.cpuTime+"/ Memory:"+e.memory);
                    },
                    error: function(e) {
                        $('#resp').html("Error compiling");
                    }
                });
            }
        </script>
    </body>
</html>
